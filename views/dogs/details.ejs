<% layout('layouts/boilerplate')%>
<div class="container">
  <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">
      <% dog.images.forEach((img, index) => { %>
      <div class="carousel-item <%= index===0 ? 'active' : ''%>">
        <img src="<%= img.url %>" alt="image" />
      </div>
      <% }) %>
    </div>
    <% if(dog.images.length > 1) {%>
    <a
      class="carousel-control-prev"
      href="#carouselExampleControls"
      role="button"
      data-slide="prev"
    >
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a
      class="carousel-control-next"
      href="#carouselExampleControls"
      role="button"
      data-slide="next"
    >
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
    <% } %>
  </div>

  <h1><%= dog.name %></h1>
  <h2><%= dog.breed %></h2>
  <h3><%= dog.age %></h3>
  <h4>Submitted by <b><%= dog.author.username %></b></h4>
  <p><%= dog.description %></p>

  <% if( currentUser && dog.author.equals(currentUser._id)) {%>
  <a href="/dogs/<%= dog._id %>/edit" class="btn btn-info mb-2">Edit</a>
  <div>
    <form action="/dogs/<%= dog._id %>?_method=DELETE" method="POST">
      <button>Delete</button>
    </form>
  </div>
  <% }%>
</div>
